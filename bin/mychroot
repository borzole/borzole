#!/bin/bash

# PLD 
# by borzole.one.pl

mychroot="/mnt/pld"

function on(){

	mount /dev/sdb2	$mychroot/boot &&
	mount /dev/sdb4 $mychroot &&
	#mount /dev/sdb3		swap
	cp -L /etc/resolv.conf $mychroot/etc/ &&
	mount --bind /dev $mychroot/dev &&
	mount -t proc proc $mychroot/proc &&
	mount -t sysfs none $mychroot/sys &&
	mount --bind /tmp $mychroot/tmp
	# mount --bind /home $mychroot/home/users
}

function off(){
	umount $mychroot/tmp &&
	umount $mychroot/sys &&
	umount $mychroot/proc &&
	umount $mychroot/dev &&
	umount $mychroot &&
	umount $mychroot/boot
}

menu(){
	case "$1" in
		on)
			on
			;;
		off)
			off
  			;;
		*)
			$0 {on|off}
			;;
	esac
}
menu $@
